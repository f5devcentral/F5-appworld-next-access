<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 3: Behavioral DoS Protection</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 3: Behavioral DoS Protection"/>
  <meta name="product" content="F5 Web Application Firewall Solutions"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2023-05-04 07:11:03"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Web Application Firewall Solutions" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 3: Behavioral DoS Protection &#8212; F5 Web Application Firewall Solutions  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Module 4: Login Page Protection" href="../../module4-login-protect/module4.html" />
    <link rel="prev" title="Module 3: Layer 7 DoS Protection" href="../module3.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Web Application Firewall Solutions  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../waf102/waf102.html">WAF 102 - Getting started with WAF, Bot Detection and Threat Campaigns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../waf111/waf111.html">WAF 111 - Protecting Yourself Against the OWASP Top 10</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../waf201.html">WAF 201 – Elevated WAF Security</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../labinfo/labinfo.html">Lab Environment &amp; Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../module1-elevated-bot/module1.html">Module 1: Elevated Bot Defense</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../module2-positive-sec/module2.html">Module 2: Intro to Positive Security</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../module3.html">Module 3: Layer 7 DoS Protection</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Lab 3: Behavioral DoS Protection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../module4-login-protect/module4.html">Module 4: Login Page Protection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../waf2023/waf2023.html">WAF 101 - BIG-IP Security:  Mitigating App Vulnerabilities with AWAF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../waf301/waf301.html">WAF 301 - AWAF in a CI/CD Pipeline (Self Guided)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../waf302/waf302.html">WAF 302 - Enabling API Protection with APM and AWAF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../waf341/waf341.html">WAF 341 – Advanced Protection and Positive Security (Self Guided)</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 3: Behavioral DoS Protection</a><ul>
<li><a class="reference internal" href="#test-default-site-behavior">Test Default Site Behavior</a></li>
<li><a class="reference internal" href="#start-the-attack">Start the Attack</a></li>
<li><a class="reference internal" href="#advanced-waf-to-the-rescue">Advanced WAF to the Rescue</a></li>
<li><a class="reference internal" href="#apply-the-dos-profile-and-test">Apply the Dos Profile and Test</a></li>
<li><a class="reference internal" href="#stop-the-baseline-and-attack-scripts">Stop the Baseline and Attack Scripts</a></li>
<li><a class="reference internal" href="#enable-blocking-in-the-dos-profile">Enable Blocking in the DoS Profile</a></li>
<li><a class="reference internal" href="#verify-behaviors">Verify Behaviors</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../../index.html">F5 Web Application Firewall Solutions</a>
              &gt; <a href="../../waf201.html">WAF 201 – Elevated WAF Security</a>
              &gt; <a href="../module3.html">Module 3: Layer 7 DoS Protection</a>

          <span class="right">
             <a href="../../../_sources/waf201/module3-L7-dos/lab1/lab1.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-waf">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-3-behavioral-dos-protection">
<h1>Lab 3: Behavioral DoS Protection<a class="headerlink" href="#lab-3-behavioral-dos-protection" title="Permalink to this heading">¶</a></h1>
<p>In this lab you will use a baseline traffic generation script and an Apache Bench based attack script against a Virtual Server in both transparent and blocking mode to trigger Behavioral DoS Protection. <strong>Unlimited Behavioral DoS protection profiles are a feature of Advanced WAF.</strong>.</p>
<div class="section" id="test-default-site-behavior">
<h2>Test Default Site Behavior<a class="headerlink" href="#test-default-site-behavior" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p class="first">Navigate to <strong>Local Traffic &gt; Virtual Servers &gt; owasp-juiceshop_443_vs &gt; Security &gt; Policies</strong>.</p>
</li>
<li><p class="first"><strong>Disable</strong> all Policies and Logging Profiles so that we can effectively demonstrate just the DoS mitigation.</p>
</li>
<li><p class="first">Click <strong>Update</strong>.</p>
<p>Your Virtual Server should look like this:</p>
<a class="reference internal image-reference" href="../../../_images/dos_vs.png"><img alt="../../../_images/dos_vs.png" src="../../../_images/dos_vs.png" style="width: 600px;" /></a>
</li>
<li><p class="first">Open a new <strong>Terminal</strong> window and run the <strong>baseline_menu.sh</strong> script in the <strong>Agility2021wafTools</strong> directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/Agility2021wafTools/
./baseline_menu.sh
</pre></div>
</div>
</li>
</ol>
<ol class="arabic simple" start="5">
<li>Choose <strong>Option 2</strong> and hit the <strong>Return Key or Enter key</strong>.</li>
<li>You will see the script start sending traffic to the site and you should see all responses with an http code of <strong>status: 200</strong>.</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/status.png"><img alt="../../../_images/status.png" src="../../../_images/status.png" style="width: 600px;" /></a>
<ol class="arabic simple" start="7">
<li>While the script is still running, open a new browser tab and click on the <strong>OWASP JuiceShop</strong> bookmark.</li>
<li>Browse around the site and refresh the page a few times. You should not notice any lag in response time and everything should load relatively quickly in the browser even with the baseline script running in the background.</li>
</ol>
</div>
<div class="section" id="start-the-attack">
<h2>Start the Attack<a class="headerlink" href="#start-the-attack" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p class="first">Open a new <strong>Terminal</strong> tab and ensure you are in the <strong>~/Agility2021wafTools/</strong> directory and run the AB_SSL_DOS.sh script.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/Agility2021wafTools/
./AB_SSL_DOS.sh
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple" start="2">
<li>Choose <strong>Option 1</strong> and hit the <strong>Return Key or Enter key</strong>.</li>
<li>Back in Chrome browser, attempt to refresh the site. <strong>There are no smoke and mirrors here.</strong> The Apache Bench script almost instantly knocked this single container site offline. If it isn’t offline, then it’s horribly slow and un-usable. <strong>There was no special configuration on the server side.</strong></li>
<li>Stop the Apache Bench script by hitting (Ctrl + C) and then type the # <strong>4</strong> and hit the <strong>Return Key or Enter key</strong>.</li>
<li>In JuiceShop refresh the page a few times. The site should recover quickly as the connections die down.</li>
<li><strong>Leave the baseline_menu script running</strong>.</li>
</ol>
<p><strong>Questions</strong>: What do you do when you are shopping online and a site is behaving like this? Do you think attackers and/or competing entities ever use this to their advantage?</p>
</div>
<div class="section" id="advanced-waf-to-the-rescue">
<h2>Advanced WAF to the Rescue<a class="headerlink" href="#advanced-waf-to-the-rescue" title="Permalink to this heading">¶</a></h2>
<p>For demonstration purposes in this lab, we will simply configure Source IP based DoS Protection, although there are several selectors available including DoS mitigation based on Device ID, Geolocation, URL, and even Site Wide.</p>
<ol class="arabic simple">
<li>In the Advanced WAF tab of Chrome, navigate to <strong>Security &gt; DoS Protection &gt; Protection Profiles</strong> and click <strong>Create</strong>.</li>
<li>Name the profile <strong>juiceshop_dos</strong> and click <strong>Behavioral &amp; Stress-based Detection</strong> to the left.</li>
<li>Configure the <strong>Behavioral &amp; Stress-based Detection</strong> settings like below:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Operation Mode: <strong>Transparent</strong> (It’s an F5 recommended best practice to add new features to a policy in transparent mode until you fully understand the impacts.)</li>
<li>Thresholds Mode: <strong>Manual.</strong></li>
<li>Stress-based Detection and Mitigation:<ul>
<li>By Source IP: Click <strong>Edit</strong> and check the box at the bottom for <strong>Client-Side Integrity Defense</strong> which tells the WAF to send an Active JS challenge when under attack to verify the browser vs an attacking bot.</li>
</ul>
</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Set the Relative Threshold to <strong>500%</strong> and <strong>15</strong> transactions per second.</li>
<li>Set the Absolute Threshold TPS to <strong>20</strong>.</li>
</ul>
<a class="reference internal image-reference" href="../../../_images/behav.png"><img alt="../../../_images/behav.png" src="../../../_images/behav.png" style="width: 600px;" /></a>
<ul>
<li><p class="first">Behavioral Detection and Mitigation: &gt; click <strong>Edit</strong>.</p>
<blockquote>
<div><ul class="simple">
<li><strong>Check</strong> the box for <strong>Use TLS patterns as part of host identification.</strong></li>
<li><strong>Check</strong> the box for <strong>TLS fingerprinting signatures.</strong></li>
<li>Under <strong>Mitigation</strong> read the description of <strong>Standard Protection.</strong></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Prevention Duration: &gt; click <strong>Edit.</strong></p>
<blockquote>
<div><ul class="simple">
<li>Escalation Period: <strong>90</strong> seconds.</li>
<li>De-escalation Period: <strong>360</strong> seconds.</li>
</ul>
</div></blockquote>
</li>
</ul>
<a class="reference internal image-reference" href="../../../_images/bdos.png"><img alt="../../../_images/bdos.png" src="../../../_images/bdos.png" style="width: 600px;" /></a>
<ol class="arabic simple" start="4">
<li>Click <strong>Finished.</strong></li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">What you essentially just configured was a DoS “Client Source IP” traffic categorizer with step-up mitigations. In this case, mitigations will fire in the order that they are shown in the GUI and progress every 90 seconds. First, a client-side integrity check is performed (JS injection) and if necessary the WAF will escalate to issuing a CAPTCHA to offending clients. Finally, Rate-Limiting kicks in as a last resort. You could use any combination of these three mitigation tactics with any of the DoS categorizer types in the profile.</p>
</div>
</div>
<div class="section" id="apply-the-dos-profile-and-test">
<h2>Apply the Dos Profile and Test<a class="headerlink" href="#apply-the-dos-profile-and-test" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li>Navigate to <strong>Local Traffic &gt; Virtual Servers &gt; owasp-juiceshop_443_vs &gt; Security &gt; Policies</strong>.</li>
<li><strong>Enable</strong> the Dos Protection Profile and choose our new <strong>juiceshop_dos</strong> profile and also <strong>Enable</strong> the <strong>local-dos</strong> Logging Profile.</li>
<li>Click <strong>Update</strong>.</li>
</ol>
<p>Your virtual server should look like this:</p>
<a class="reference internal image-reference" href="../../../_images/vs1.png"><img alt="../../../_images/vs1.png" src="../../../_images/vs1.png" style="width: 600px;" /></a>
<ol class="arabic" start="4">
<li><p class="first">Open a new tab to JuiceShop and browse the site. There should not be any perceivable effect of having applied the DoS profile.</p>
</li>
<li><p class="first">Browse the photo wall from the hamburger menu (top left) and leave some arbitrary Customer Feedback. Spend about a minute browsing the site.</p>
</li>
<li><p class="first">Open a new <strong>Terminal</strong> tab and start the attack script again and choose option <strong>1</strong>:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/Agility2021wafTools/
./AB_SSL_DOS.sh
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple" start="7">
<li>Navigate to <strong>Security &gt; Event Logs &gt; DoS &gt; Application Events</strong> and review the entry. It may take a few moments for the event to appear in the dashboard.</li>
<li>Click on the Attack ID #.</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/dos.png"><img alt="../../../_images/dos.png" src="../../../_images/dos.png" style="width: 600px;" /></a>
<ol class="arabic simple">
<li>Once the Dashboard loads, turn on <strong>Real Time</strong> by checking the box at the top of the dashboard. <strong>It will take a few moments for the data to populate. “Real Time” is relative here.</strong></li>
</ol>
<a class="reference internal image-reference" href="../../../_images/bdoslog.png"><img alt="../../../_images/bdoslog.png" src="../../../_images/bdoslog.png" style="width: 600px;" /></a>
<ol class="arabic simple" start="10">
<li><strong>Eventually…it may take several minutes</strong>, click on the attack graphic and then select the virtual server to the right. You may have to wait a few moments for the Virtual Server to appear.</li>
<li>There is alot of information on DoS Visibility Dashboard including the type of attack, the severity, duration and much more. You can use the <strong>Real Time</strong> filters on the right to further dissect the traffic and drill down for analysis. <strong>It may take some time for various data fields to load</strong>.</li>
<li>From the right hand filters menu expand <strong>Client IP Addresses</strong>, <strong>Pool Members</strong> and <strong>URLS</strong> and review the attack data. You can drag the boxes to group them closer together as shown here and there is also a flyout.</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/client.png"><img alt="../../../_images/client.png" src="../../../_images/client.png" style="width: 600px;" /></a>
<ol class="arabic simple" start="13">
<li>In the top middle of the GUI click the <strong>Analysis</strong> tab and review the system health overview of the BIG-IP device itself. Scroll down and check out the CPU, Connection and Throughput stats.</li>
<li>At the bottom you will get to the HTTP stats which should be of most interest.</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/sys.png"><img alt="../../../_images/sys.png" src="../../../_images/sys.png" style="width: 600px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<a class="reference internal image-reference" href="../../../_images/http_stats.png"><img alt="../../../_images/http_stats.png" src="../../../_images/http_stats.png" style="width: 600px;" /></a>
</div>
<div class="section" id="stop-the-baseline-and-attack-scripts">
<h2>Stop the Baseline and Attack Scripts<a class="headerlink" href="#stop-the-baseline-and-attack-scripts" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li>In each of your terminal windows or tabs type <strong>Ctrl+C</strong> to terminate <strong>all</strong> the scripts including the baseline. The <strong>AB_SSL_DOS.sh</strong> script will require you to enter <strong>4</strong> to completely stop the attacks.</li>
</ol>
</div>
<div class="section" id="enable-blocking-in-the-dos-profile">
<h2>Enable Blocking in the DoS Profile<a class="headerlink" href="#enable-blocking-in-the-dos-profile" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p class="first">In the Advanced WAF tab, navigate to <strong>Security &gt; DoS Protection &gt; Protection Profiles &gt; juiceshop_dos</strong> and click on <strong>Behavioral &amp; Stress-based Detection</strong>.</p>
</li>
<li><p class="first">Under <strong>Operation Mode</strong> click <strong>Edit</strong> and from the dropdown choose <strong>Blocking</strong> and click <strong>Update</strong>.</p>
</li>
<li><p class="first">Open a new tab to JuiceShop and ensure the site is operating normally.</p>
</li>
<li><p class="first">Open a new Terminal Tab and run the AB_SSL_DOS script again. Choose <strong>Option 1</strong>.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/Agility2021wafTools/
./AB_SSL_DOS.sh
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple" start="5">
<li>Attempt to refresh JuiceShop..initially it is down, but within about a minute and a few refreshes later, the WAF has figured out the attack and taken mitigation action.</li>
<li>Navigate to <strong>Security &gt; Event Logs &gt; DoS &gt; Application Events</strong> and review the new entries. We can see that the attack was picked up by behavioral mitigation first.</li>
<li>Next we can see that the mitigation was changed to <strong>DOS L7 Attack</strong> with <strong>Source IP-Based Client Side Integrity Defense</strong>. This means that the WAF is actively challenging these IP addresses with JS.</li>
<li>Expand the <strong>+</strong> and you will be able to see more details about the mitigation for each of the client IPs.</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/events11.png"><img alt="../../../_images/events11.png" src="../../../_images/events11.png" style="width: 600px;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Linux client uses 10.1.10.100 as it’s primary source IP. This is the IP you are coming from when using the browser. The Apache Bench script is configured to use alternate source IPs (10.1.10.51, .52, and .53).</p>
</div>
</div>
<div class="section" id="verify-behaviors">
<h2>Verify Behaviors<a class="headerlink" href="#verify-behaviors" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li>Notice JuiceShop continues to load fine in the browser now that mitigations are in place for the attacking IPs.</li>
<li>Open a new terminal tab and run the following command: <code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-k</span> <span class="pre">https://juiceshop.f5agility.com</span></code>.</li>
<li>Notice the default HTML being returned for the site. You are coming from the <strong>.100</strong> IP address.</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/curl1.png"><img alt="../../../_images/curl1.png" src="../../../_images/curl1.png" style="width: 600px;" /></a>
<ol class="arabic simple" start="4">
<li>Stop the Apache Bench attack in the terminal window by typing <strong>CTRL + C</strong> and then <strong>4</strong> and hit <strong>Return</strong>.</li>
<li>Now run this command in terminal to send the request from an IP that is being mitigated by DoS profile. <code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-k</span> <span class="pre">--interface</span> <span class="pre">10.1.10.51</span> <span class="pre">https://juiceshop.f5agility.com</span></code>.</li>
<li>Notice the JavaScript challenge. This IP will continue to be challenged for the duration of the de-escalation period of 360 seconds that we set earlier or as long as the server is under stress from this IP. You should also observe JS injection if you substitute <strong>10.1.10.52 and 10.1.10.53</strong> in the curl request.</li>
<li>If for some reason you notice that the JS challenge is not appearing in the response to your curl request, it’s possible that the cool-off period (configured in your DoS Profile) has already elapsed. If so, restart the attack (<strong>./AB_SSL_DOS.sh &gt; Option 1</strong>) and let it run for a minute or so, then repeat Steps 4 and 5 respectively.</li>
<li>You should now observe a JS challenge when submitting a curl request from any of the three IP addresses (.51, .52, or .53), even though the attack has ceased.</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/curl2.png"><img alt="../../../_images/curl2.png" src="../../../_images/curl2.png" style="width: 600px;" /></a>
<p><strong>This concludes Lab 3.</strong></p>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="../module3.html" title="Module 3: Layer 7 DoS Protection" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../../module4-login-protect/module4.html" title="Module 4: Login Page Protection" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../../_static/js/index.js"></script>
  <script src="../../../_static/js/jquery.appear.js"></script>
  <script src="../../../_static/js/printThis.js"></script>
  <script src="../../../_static/js/bootstrap.min.js"></script>
  <script src="../../../_static/js/clouddocs.js"></script>
  <script src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>